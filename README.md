# (1) 述語項構造解析を用いた企業活動と政府活動のフェイズチェックプログラム

## 必要ライブラ
SpaCy
+ SpaCyからダウンロード

## 入出力

### 入力
+ テキスト（文字列）
  + （文末に句読点やカッコがない場合は、文末に「。」を付与するとSpaCyの解析エラーを回避できる）

### 出力
+ 企業フェイズ情報(文字列)

  1. 研究・開発　　　　：　研究開発段階
  2. 商用化・サービス化：　商用化段階
  3. その他　　　　　　：　展示や協業、参画などその他の企業活動、及び企業活動以外
  
  
+ 政府フェイズ情報(文字列)
  1. 政府活動か否かの分類 
     1. <政府活動>　　　　： 政府活動
     2. <企業活動背景>　　： 企業活動の背景
     3. <その他>　　　　　： その他
  2. 政府国別
     1. <日本>,<中国>...　  ：　国名
  3. 政府活動分類
     1. <目標・計画・指針>    　　　：　目標
     2. <法整備・規制>       　　　　　：　法整備、行政による規制
     3. <補助金・交付金>　    　　　：　補助金
     4. <税制・予算>　       　　　　　：　予算、税金関係　
     5. <指数・統計>　       　　　　　：　統計指数、具体的な数字あり
     6. <国際会議・会合・会談> 　：　会議参加、開催
     7. <その他>　　　　　　　　 ：　その他（政府活動でのその他）
   4. 進行状況
      1. <検討>　  　　　：　検討、調査段階
      2. <施行>　  　　　：　施行
      3. <改正>　  　　　：　改正
      4. <廃止>　  　　　：　廃止

### フェイズの判定基準（優先順位）
1. 主述部に企業活動キーワードがある
2. 限定された格（phase_analyze_case[]）で補助用言（sub_verb_dic）につながる項で企業活動キーワードがある
3. 補助用言の中で企業活動キーワードに属するもの

## 評価データ
+ solution_sentnece.txt (5000文)
+ government_news.txt (政府活動文　1066文)

## ルール・辞書
+ phase_rule_dic.py
:フェーズの判別関係の辞書
  + フェーズルール (kousou_dic, kenkyuu_dic, kaihatsu_dic, jikken_dic, seihin_dic, koushin_dic, tyuushi_dic, sankaku_dic, riyou_dic, soshiki_dic, renkei_dic, tsuuchi_dic, tetsuzuki_dic, sonota_dic)
  + フェーズ処理の対象になる格の定義 (phase_analyze_case)
  + 時制に関する補助用言 (kako, genzai, mirai)
  + マルチラベルをシングルラベルに変換するルール (single_rule)


+ 政府活動判別ルール(government_action_dic.py)
  + カテゴリルール(kentou_dic,o_v_kentou_dic,o_v_kentou2_dic,sekou_dic,kaisei_dic,haishi_dic,kunji_dic,yousei_dic,ninka_dic,keiyaku_dic,sosyou_dic,kannkoku_dic,date_dic,decision_dic,action_dic,naiyous_dic,sakusei_dic,haikei_dic,shoken_dic,souritsu_dic,renkei_dic,system_dic,shien_dic,boshyu_dic,yuushi_dic,kounyuu_dic,baikyaku_dic,koukai_dic,kaidan_dic,haken_dic,event_dic,others_dic)
  
  + 主述部でカテゴリと認めるルール（phrase_rule）
  + 補助述部でも政府活動と認めるカテゴリのルール（sub_phrase_rule）
  + 政府情報発信述語ルール（press_dic）
  + シングルラベルルール（single_rule）
  + 進行状態ルール（stat_rule）
  
    
+ sub_verb_dic.py
:補助用言辞書
+ special_verb_dic.py
:企業活動動詞辞書
+ kanyouku_dic.py
:慣用句辞書
## プログラムリスト
### サンプルプログラム
+ sample.py

### メインプログラム1 (企業活動フェイズ)
+ phase_extractor.py
  + 関数

  class PhaseExtractor:
                   
  def single_phase_extract(self, text):

### メインプログラム2 (政府活動フェイズ)
+ government_news_analysis.py
  + 関数

  class GovernmentNewsAnalysis:
                   
  def government_phase_extract(self, text):  (主語が政府活動家を判断する)

  def government_action_extract(self, text): (主語は政府活動と仮定する)


テキスト入力に対してフェーズ情報を返す。
"debug"フラグによりdebugモードにすると解析結果をダンプできる。
debugモードのときは解析結果のログ(tsv)が出力となる。


### ライブラリ
+ phase_check.py (述語項構造からフェーズの獲得)
+ main_verb_check.py (主述部か補助述部かの判断)
+ pas_analysis.py (述語項構造の作成)
+ predicate_get.py (述部の判断と基本術部の獲得)
+ predicate_phrase_analysis.py　（基本述部の解析。結合するとルールIDも返る）
+ predicate_split.py　（主述部と補助述部の分離処理）
+ case_information_get.py　（格情報の獲得）
+ subject_get.py (主語の獲得)
+ parallel_get.py (並列項の獲得)
+ kanyouku_check.py (慣用句処理)
+ modality_get.py   (モダリティ処理、TBD　現在はテストプログラムのみ)
+ chunker.py (名詞と動詞のチャンキングと格情報の獲得、各項の生成はここで行う)
+ data_dump.py (デバッグ用のデータダンプ)

# (2) 述語項構造解析を用いた政府HPニュースの活動チェックプログラム

## 必要ライブラ
SpaCy
+ SpaCyからダウンロード

## 入出力

### 入力
+ json（文字列）
  + データ形式

````
[
  {
    "id": "id",
    "media_name": "媒体",
    "preprocessed_title": "タイトル",
    "text": "本文",
  }
]
````

### 出力
+ ファイル
  + news_out.json


+ json（文字列）
  + データ形式
  
````
[
  {
    "id": "id",
    "soshiki": "官公庁組織",
    "busho": "部署",
    "title": "タイトル",
    "title_type": "タイトルからの政府フェイズタグ",
    "head": "本文のリード部分",
    "head_type": "本文からの政府フェイズタグ"
  }
]
````


+ 政府フェイズ情報(文字列) 
  + (government_phase_extract()と同じ)
    1. 政府活動か否かの分類 
       1. <政府活動>　　　　： 政府活動
       2. <企業活動背景>　　： 企業活動の背景
       3. <その他>　　　　　： その他
    2. 政府国別
       1. <日本>,<中国>...　  ：　国名
    3. 政府活動分類
       1. <目標・計画・指針>    　　　：　目標
       2. <法整備・規制>       　　　　　：　法整備、行政による規制
       3. <補助金・交付金>　    　　　：　補助金
       4. <税制・予算>　       　　　　　：　予算、税金関係　
       5. <指数・統計>　       　　　　　：　統計指数、具体的な数字あり
       6. <国際会議・会合・会談> 　：　会議参加、開催
       7. <その他>　　　　　　　　 ：　その他（政府活動でのその他）
    4. 進行状況
       1. <検討>　  　　　：　検討、調査段階
       2. <施行>　  　　　：　施行
       3. <改正>　  　　　：　改正
       4. <廃止>　  　　　：　廃止

### 本文のパース方法
1. 官公庁組織は媒体名から取得
2. タイトルはそのまま解析
3. 本文は改行で区切り「。」が含まれているものを対象にする
4. 対象文もさらに「。」により区切り短文にする。
5. 短文の単位で処理を行い政府活動フェイズに相当するタグが取得できた場合は処理を終了する。
6. 組織は本文の文末付近の特定の文字列により判断を行い抽出する。

## 評価データ
+ keisan_input.json (661ページ)

### サンプルプログラム
+ sample.py

### メインプログラム2 (政府活動フェイズ)
+ government_news_analysis.py
  + 関数

  class GovernmentNewsAnalysis:
                   
  def government_news_analysis(self, json):

## その他プログラム構成は同じ

## サンプルプログラム実行結果

```
研究・開発
<政府活動>,<日本>,<行政・司法>
[
  {
    "id": "88499207",
    "soshiki": "経済産業省",
    "busho": "貿易経済協力局,投資促進課",
    "title": "J-Bridgeアフリカローンチイベントを開催します （METI/経済産業省）",
    "title_type": "<政府活動>,<日本>,<その他>",
    "head": "経済産業省は、日本企業と海外スタートアップ等との協業を促進するプラットフォーム「Japan Innovation Bridge（通称「J-Bridge」）」のアフリカでのサービス開始を記念して、8月4日に「イノベーションが拓くアフリカの未来～協業でつかむビジネス機会～ （J-Bridgeアフリカローンチイベント）」を日本貿易振興機構（JETRO）とともに開催します。このセミナーには、細田経済産業副大臣、アフリカの政府機関関係者のほか、アフリカのイノベーション最前線で活躍する有識者や日アフリカ間で先駆的な協業を行っている日本企業、アフリカのイノベーションを牽引する革新的な技術を持つスタートアップが登壇します。多くの皆様からの御参加をお待ちしています。",
    "head_type": "<政府活動>,<日本>,<その他>"
  },
  {
    "id": "87897096",
    "soshiki": "経済産業省",
    "busho": "通商政策局,アジア大洋州課",
    "title": "萩生田経済産業大臣がタイ・アネーク高等教育・科学・研究・イノベーション大臣と会談を行いました （METI/経済産業省）",
    "title_type": "<政府活動>,<日本>,<その他>",
    "head": "7月15日、萩生田経済産業大臣は、タイのアネーク高等教育・科学・研究・イノベーション大臣と会談し、アジア未来投資イニシアティブに基づく取組の具体化等、二国間関係の深化に向けて幅広く意見交換しました。",
    "head_type": "<政府活動>,<日本>,<その他>"
  },
  {
    "id": "85548149",
    "soshiki": "経済産業省",
    "busho": "通商政策局,アジア大洋州課",
    "title": "経済産業省とシンガポール貿易産業省との間で官民対話を立ち上げました （METI/経済産業省）",
    "title_type": "<政府活動>,<日本>,<その他>",
    "head": "5月25日、アジア未来投資イニシアティブの取組を具体化していくため、経済産業省とシンガポール貿易産業省との間で官民対話を立ち上げました。",
    "head_type": "<政府活動>,<日本>,<その他>"
  },
  {
    "id": "86099986",
    "soshiki": "経済産業省",
    "busho": "資源エネルギー庁,省エネルギー課",
    "title": "2022年度第1回 総合資源エネルギー調査会 省エネルギー・新エネルギー分科会 省エネルギー小委員会 工場等判断基準ワーキンググループ（METI/経済産業省）",
    "title_type": "",
    "head": "会議の様子は、以下の動画から御覧になれます。",
    "head_type": "<政府活動>,<日本>,<その他>"
  },
  {
    "id": "86370891",
    "soshiki": "経済産業省",
    "busho": "中小企業庁,事業環境部,財務課",
    "title": "中小企業の経営資源集約化等に関する検討会(中小M&A推進計画フォローアップ)を開催します （METI/経済産業省）",
    "title_type": "<政府活動>,<日本>,<その他>",
    "head": "中小企業庁は、昨年4月に取りまとめた「中小M&A推進計画」のフォローアップを行うべく、中小企業の経営資源集約化等に関する検討会を6月21日（火曜日）に開催します。",
    "head_type": "<政府活動>,<日本>,<その他>"
  },
  {
    "id": "88471212",
    "soshiki": "経済産業省",
    "busho": "資源エネルギー庁,資源・燃料部,政策課",
    "title": "第35回 総合資源エネルギー調査会 資源・燃料分科会（METI/経済産業省）",
    "title_type": "<政府活動>,<日本>,<その他>",
    "head": "会議の様子は、以下の動画から御覧になれます。",
    "head_type": "<政府活動>,<日本>,<その他>"
  },
  {
    "id": "81885268",
    "soshiki": "経済産業省",
    "busho": "中小企業庁,経営安定対策室",
    "title": "ウクライナ情勢の変化に伴い中小企業・小規模事業者対策を行います （METI/経済産業省）",
    "title_type": "<政府活動>,<日本>,<その他>",
    "head": "中小企業庁は、昨今のウクライナ情勢や原油価格高騰などにより影響を受ける中小企業・小規模事業者を支援するため、相談窓口を設置するとともに、厳しい状況に直面する事業者に対する資金繰り支援を実施します。",
    "head_type": "<政府活動>,<日本>,<その他>"
  },
  {
    "id": "87555838",
    "soshiki": "経済産業省",
    "busho": "経済産業省,経済産業政策局,地域経済産業グループ,地域企業高度化推進課",
    "title": "令和4年度「地域新成長産業創出促進事業費補助金（地域デジタルイノベーション促進事業）」に係る補助事業者の2次公募について （METI/経済産業省）",
    "title_type": "<政府活動>,<日本>,<その他>",
    "head": "令和4年度「地域新成長産業創出促進事業費補助金（地域デジタルイノベーション促進事業）」に係る補助事業者を、以下の要領で広く募集します。応募に際しては、公募要領、交付要綱（案）を併せて御確認ください。",
    "head_type": "<政府活動>,<日本>,<その他>"
  },
  {
    "id": "84328557",
    "soshiki": "経済産業省",
    "busho": "",
    "title": "IAEAレビューミッション報告書の公表を受けて （METI/経済産業省）",
    "title_type": "<政府活動>,<日本>,<その他>",
    "head": "今年２月に行われたIAEAレビューミッションの報告書が、本日公表されました。 IAEAによるレビューでは、専門的・客観的な立場から、ALPS処理水の処分の安全性確保に向けた我が国の取組について厳正に評価いただきました。",
    "head_type": "<政府活動>,<日本>,<その他>"
  },
  {
    "id": "84206877",
    "soshiki": "経済産業省",
    "busho": "特許庁,総務部,企画調査課",
    "title": "「ウイルス感染症対策」において日本はmRNAワクチン等の最新技術で出遅れ （METI/経済産業省）",
    "title_type": "",
    "head": "特許庁は、令和4年4月27日に、将来の市場創出・拡大が見込める最先端分野である「ウイルス感染症対策」の技術テーマについて、特許情報等を調査・分析した特許技術動向調査の報告書を取りまとめました。",
    "head_type": "<政府活動>,<日本>,<その他>"
  }
]
```